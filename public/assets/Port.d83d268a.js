var e=Object.defineProperty,t=Object.defineProperties,s=Object.getOwnPropertyDescriptors,o=Object.getOwnPropertySymbols,r=Object.prototype.hasOwnProperty,a=Object.prototype.propertyIsEnumerable,l=(t,s,o)=>s in t?e(t,s,{enumerable:!0,configurable:!0,writable:!0,value:o}):t[s]=o;import{e as n,T as i,_ as c,Y as d,g as m,O as p,N as u,Z as b,r as f,o as v,c as g,b as P,P as D,R as h,S as $,t as y,d as x}from"./vendor.8e75f880.js";import{h as O}from"./index.8117c3a1.js";import{a as A}from"./axios.b48086f7.js";const C={name:"Account",setup(){const e=n({tableData:[]}),f=u();i((()=>{const{proxy:t}=b();t.$socket.onmessage=e=>{const t=JSON.parse(e.data);switch(t.m){case"openclient":case"closeclient":console.log({data:t});break;case"openport":case"closeport":console.log({data:t})}},A.get("/vue_api?m=clientinfo").then((t=>{e.tableData=t.map((e=>(e.version="",e))),console.log(e.tableData)})).catch((e=>{if(A.isAxiosError(e))O(e);else if(console.error(e),e.response){console.error(e.response.data);const{code:t,message:s}=e.response.data;c.error(`Error: ${t} - ${s}`)}}))})),d((()=>{const{proxy:e}=b();delete e.$socket.onmessage}));const v=m({get:()=>f.state.vbClientID,set:e=>f.commit("setVBClientID",{vbClientID:e})});return g=((e,t)=>{for(var s in t||(t={}))r.call(t,s)&&l(e,s,t[s]);if(o)for(var s of o(t))a.call(t,s)&&l(e,s,t[s]);return e})({},p(e)),t(g,s({submitVersion:({remoteAddress:t,remotePort:s})=>{const o=`${t}:${s}`;A.get(`/vue_api?m=version&_id=${o}`).then((t=>{const s=JSON.parse(t);if(console.log(s),s.message){c.error(s.message);for(let t=0,s=e.tableData.length;t<s;t++){const s=e.tableData[t];if(`${s.remoteAddress}:${s.remotePort}`===o){s.version="";break}}}else{for(let t=0,r=e.tableData.length;t<r;t++){const r=e.tableData[t];if(`${r.remoteAddress}:${r.remotePort}`===o){r.version=s.version;break}}c.success("成功獲取版本號")}})).catch((e=>{if(A.isAxiosError(e))O(e);else if(console.error(e),e.response){console.error(e.response.data);const{code:t,message:s}=e.response.data;c.error(`Error: ${t} - ${s}`)}}))},vbClientID:v}));var g}},V=P("div",{class:"card-header"},[P("span",null,"TCP Client")],-1),_={class:"text item"},j=P("span",{class:"client-item-title"},"client address:",-1),k={class:"text item"},S=P("span",{class:"client-item-title"},"Client status:",-1),w=P("div",{class:"card-header"},[P("span",null,"Serial Port")],-1),I={class:"text item"},E=P("span",{class:"client-item-title"},"Port Number:",-1),N={class:"text item"},U=P("span",{class:"client-item-title"},"Port Status:",-1),F=P("div",{class:"card-header"},[P("span",null,"DLL Version")],-1),J=x("獲取版本號");C.render=function(e,t,s,o,r,a){const l=f("el-option"),n=f("el-select"),i=f("el-input"),c=f("el-form-item"),d=f("el-button"),m=f("el-form"),p=f("el-card");return v(),g(h,null,[P(n,{modelValue:o.vbClientID,"onUpdate:modelValue":t[1]||(t[1]=e=>o.vbClientID=e),placeholder:"Select"},{default:D((()=>[(v(!0),g(h,null,$(e.tableData,(e=>(v(),g(l,{key:e.remoteAddress+":"+e.remotePort,label:e.remoteAddress+":"+e.remotePort,value:e.remoteAddress+":"+e.remotePort},null,8,["label","value"])))),128))])),_:1},8,["modelValue"]),(v(!0),g(h,null,$(e.tableData,(t=>(v(),g(p,{key:t.remoteAddress+":"+t.remotePort,class:"account-container"},{default:D((()=>[V,P("div",_,[j,P("span",null,y(`${t.remoteAddress}:${t.remotePort}`),1)]),P("div",k,[S,P("span",null,y(t.connected),1)]),w,P("div",I,[E,P("span",null,y(t.serialPort),1)]),P("div",N,[U,P("span",null,y(t.serialStatus),1)]),F,P(m,{model:e.versionForm,rules:e.rules,"label-width":"80px","label-position":"right",class:"demo-ruleForm"},{default:D((()=>[P(c,{label:"版本號:",prop:"version"},{default:D((()=>[P(i,{style:{width:"200px"},modelValue:t.version,"onUpdate:modelValue":e=>t.version=e},null,8,["modelValue","onUpdate:modelValue"])])),_:2},1024),P(c,null,{default:D((()=>[P(d,{type:"success",onClick:e=>o.submitVersion(t)},{default:D((()=>[J])),_:2},1032,["onClick"])])),_:2},1024)])),_:2},1032,["model","rules"])])),_:2},1024)))),128))],64)};export default C;
