var e=Object.defineProperty,s=Object.defineProperties,t=Object.getOwnPropertyDescriptors,r=Object.getOwnPropertySymbols,o=Object.prototype.hasOwnProperty,a=Object.prototype.propertyIsEnumerable,n=(s,t,r)=>t in s?e(s,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):s[t]=r;import{e as l,R as i,_ as c,W as p,M as d,X as u,r as m,o as f,c as v,b,N as h,t as O,P,d as F}from"./vendor.86ff60f9.js";import{h as g}from"./index.f2d59e1f.js";import{C as x}from"./axios.8bda8223.js";const y={name:"Account",setup(){const e=l({client:{address:"",status:!1},portForm:{port:"",status:""},versionForm:{version:""}});i((()=>{const{proxy:s}=u();s.$socket.onmessage=s=>{const t=JSON.parse(s.data);switch(t.m){case"openclient":case"closeclient":e.client.status=t.udpRemoteOnline,t.udpRemoteOnline?e.client.address=`${t.udpRemoteIP}:${t.udpRemotePort}`:e.client.address="";break;case"openport":case"closeport":e.portForm.port=t.portnum,e.portForm.status=t.status}},x.get("/vue_api?m=clientinfo").then((s=>{const{udpRemoteIP:t,udpRemotePort:r,udpRemoteOnline:o,serialPort:a,serialStatus:n}=s;e.client.status=o,e.client.address=o?`${t}:${r}`:"",e.portForm.port=a,e.portForm.status=n})).catch((e=>{if(x.isAxiosError(e))g(e);else if(console.error(e),e.response){console.error(e.response.data);const{code:s,message:t}=e.response.data;c.error(`Error: ${s} - ${t}`)}}))})),p((()=>{const{proxy:e}=u();delete e.$socket.onmessage}));return m=((e,s)=>{for(var t in s||(s={}))o.call(s,t)&&n(e,t,s[t]);if(r)for(var t of r(s))a.call(s,t)&&n(e,t,s[t]);return e})({},d(e)),s(m,t({submitVersion:()=>{x.get("/vue_api?m=version").then((s=>{const t=JSON.parse(s);if(console.log(t),t.message)return c.error(t.message),void(e.versionForm.version="");e.versionForm.version=t.version,c.success("成功獲取版本號")})).catch((e=>{if(x.isAxiosError(e))g(e);else if(console.error(e),e.response){console.error(e.response.data);const{code:s,message:t}=e.response.data;c.error(`Error: ${s} - ${t}`)}}))}}));var m}},$=b("div",{class:"card-header"},[b("span",null,"UDP Client")],-1),_={class:"text item"},j=b("span",{class:"client-item-title"},"client address:",-1),R={class:"text item"},w=b("span",{class:"client-item-title"},"Client status:",-1),S=b("div",{class:"card-header"},[b("span",null,"Serial Port")],-1),V={class:"text item"},k=b("span",{class:"client-item-title"},"Port Number:",-1),C={class:"text item"},E=b("span",{class:"client-item-title"},"Port Status:",-1),N=b("div",{class:"card-header"},[b("span",null,"DLL Version")],-1),A=F("獲取版本號");y.render=function(e,s,t,r,o,a){const n=m("el-card"),l=m("el-input"),i=m("el-form-item"),c=m("el-button"),p=m("el-form");return f(),v(P,null,[b(n,{class:"account-container"},{header:h((()=>[$])),default:h((()=>[b("div",_,[j,b("span",null,O(e.client.address),1)]),b("div",R,[w,b("span",null,O(e.client.status?"Online":"Offline"),1)])])),_:1}),b(n,{class:"account-container"},{header:h((()=>[S])),default:h((()=>[b("div",V,[k,b("span",null,O(e.portForm.port),1)]),b("div",C,[E,b("span",null,O(e.portForm.status),1)])])),_:1}),b(n,{class:"account-container"},{header:h((()=>[N])),default:h((()=>[b(p,{model:e.versionForm,rules:e.rules,"label-width":"80px","label-position":"right",class:"demo-ruleForm"},{default:h((()=>[b(i,{label:"版本號:",prop:"version"},{default:h((()=>[b(l,{style:{width:"200px"},modelValue:e.versionForm.version,"onUpdate:modelValue":s[1]||(s[1]=s=>e.versionForm.version=s)},null,8,["modelValue"])])),_:1}),b(i,null,{default:h((()=>[b(c,{type:"success",onClick:r.submitVersion},{default:h((()=>[A])),_:1},8,["onClick"])])),_:1})])),_:1},8,["model","rules"])])),_:1})],64)};export default y;
