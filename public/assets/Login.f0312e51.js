var e=Object.defineProperty,r=Object.defineProperties,o=Object.getOwnPropertyDescriptors,s=Object.getOwnPropertySymbols,a=Object.prototype.hasOwnProperty,l=Object.prototype.propertyIsEnumerable,t=(r,o,s)=>o in r?e(r,o,{enumerable:!0,configurable:!0,writable:!0,value:s}):r[o]=s;import{a as u}from"./axios.b48086f7.js";import{M as n,e as i,O as m,p as d,a as p,r as c,o as f,c as b,b as y,$ as g,w as v,d as F}from"./vendor.8e75f880.js";import{a as w,r as h,h as O}from"./index.8117c3a1.js";const j={name:"Login",setup(){const e=n(null),d=i({ruleForm:{username:"",password:""},checked:!0,rules:{username:[{required:"true",message:"賬戶不能為空",trigger:"blur"}],password:[{required:"true",message:"密碼不能為空",trigger:"blur"}]}});return p=((e,r)=>{for(var o in r||(r={}))a.call(r,o)&&t(e,o,r[o]);if(s)for(var o of s(r))l.call(r,o)&&t(e,o,r[o]);return e})({},m(d)),r(p,o({loginForm:e,submitForm:()=>{e.value.validate((e=>{if(!e)return console.log("error submit!!"),!1;u.post("/login",{userName:d.ruleForm.username,password:d.ruleForm.password}).then((e=>{w("token",e.token),u.defaults.headers.Authorization=e.token,h.push({path:"/"})})).catch((e=>{u.isAxiosError(e)?O(e):console.error(e)}))}))},resetForm:()=>{e.value.resetFields()}}));var p}},_=v();d("data-v-05f6b330");const k={class:"login-body"},V={class:"login-container"},x=y("div",{class:"head"},[y("div",{class:"name"},[y("div",{class:"title"},"八達通"),y("div",{class:"tips"},"門禁卡管理系統")])],-1),P=F("立即登錄");p();const K=_(((e,r,o,s,a,l)=>{const t=c("el-input"),u=c("el-form-item"),n=c("el-button"),i=c("el-form");return f(),b("div",k,[y("div",V,[x,y(i,{"label-position":"top",rules:e.rules,model:e.ruleForm,ref:"loginForm",class:"login-form"},{default:_((()=>[y(u,{label:"賬號",prop:"username"},{default:_((()=>[y(t,{type:"text",modelValue:e.ruleForm.username,"onUpdate:modelValue":r[1]||(r[1]=r=>e.ruleForm.username=r),modelModifiers:{trim:!0},autocomplete:"off",onKeyup:g(s.submitForm,["enter"])},null,8,["modelValue","onKeyup"])])),_:1}),y(u,{label:"密碼",prop:"password"},{default:_((()=>[y(t,{type:"password",modelValue:e.ruleForm.password,"onUpdate:modelValue":r[2]||(r[2]=r=>e.ruleForm.password=r),modelModifiers:{trim:!0},autocomplete:"off",onKeyup:g(s.submitForm,["enter"])},null,8,["modelValue","onKeyup"])])),_:1}),y(u,null,{default:_((()=>[y(n,{style:{width:"100%"},type:"primary",onClick:s.submitForm},{default:_((()=>[P])),_:1},8,["onClick"])])),_:1})])),_:1},8,["rules","model"])])])}));j.render=K,j.__scopeId="data-v-05f6b330";export default j;
